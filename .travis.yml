# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: h1NA2f7ymzHalB5ndpUZqTDfW7RJPZcRewJrAf901vNA8fORYOrVFJIMoJabP57wIz8K3pcAVjoudy2xKXZWOtwfDskdNrjItfdifO4QYqTOcL1wGotM+lsH5HRMopAY6z8sZ3GIB6vEtM8BHbiMD42ij3ZUpHN2PvvF7RZ3hPwlZq28n21ofXTnNTrLldcs91FAsXF8/Iv2phwH2Gay2vz/SNxwxiU6QfQUO/4sbTMxWpWHycV8ZfwjWDOtuR6DGDl3QF2MqG31QtpMDFIfkVksUnUHiXfFsnKZRX/SBsvAJ8yNjCsjONIGbE9aJo84JqJD9D4fI3PxrIrL6EDQYhn+Y+glk7D+xgVWj35VKnlt1Z7ZAp94fnDiR4obxsub+7ROsjb0U6l+k1BV8AMacQnj5oW/gV/hgaAK7hU/HX9rcdtoE77Q88pRikft9IosU3TvoJ5WweBc/zQXmWbp8ApEDMjTvc0/362L0dM1ES6dopE8UUZKWC0Cppp8JExVi6MJLu/pAxWx31nf+CYp6mZbuMtqLpkKvih4d57WRNRBoTIx9/WWvB3ugqm59E8zlalFGXt1tgyXGtj7jW9gmEMHFYoRUe4mJqqJORX6hbAu16p9LUMIAABlXBmBpoZdtlns5vIhHvCP1ifPnlbDPiUmM3mTw+tmPR7nnaGtfbs=
  - secure: hl2s5lt0zH8SQcUMRpcmWmA4fAACmRMb/WTf/GRddTs0vY4OBdjoE9y7Gyai6J8C4kH1Ffouwg16sx8EbZoHeYXJ6KsyTm7NVtjb5sZMZ/gkPrnbEBHYgLrQEJ6IuNgNtQYh78M+91VrftC2de8Zcz0z1J0Ty5n0vEYSMk1xKJ5oAsNqN40R3NRg/kpko65jNAXH4JkCsR35sCSpgfIxMtqyAsJVsOC2F+n4K4SFR/QNxlIDMPlW/UnqY5cE4YcpWYkdSvTXcftNQmbJ76H30aehU5icgNspAQZzdeDeAR9LH7XIJiKSfodpa4FuUz+5VxHiEeAUDCLYNWZj6MtzYDHmd+mySl3t5Xhbec4pzmRxdswydlNioZ1e4AymAy5mJZcRUxYIToRhvXLN2RzIoGKzV+fy4RZIr6+02oKQFHbAmla8uu0ES6NBxSadKY+nRTOnYZ8HXjEsJuYN2pNbQMx4Ssko1Zzdv5YCc3NfTmgs6UDOy12lN/XLANUhm1UncpJ9GzrH4nZejZKNqNc/uyNrc6Uab/dFsUWRL6WVu6bKoZXm8lln5TY4+yWYJfKVZAKN4UwYHm3oUOzU9iIAwUrL6+dXmprzULY5uXnpZQyrUn2TWdWFguSPeMOxPiUDo4mk7k2vDiS7ew8RkWJJO1F/Pz0fmmS0GjHhTfZTKxo=
  - secure: iTJBuq27g4dnPE3RPegPRtx4CM+v7GH4yACKM5SdDuR3+f2N6mFzgX2kjwVmKh62RCSCfowTB2J3FwUzR23jthlKszo0qhulbv3ShIPnJbCYBxJxY+2BwVUFC2nPexfmSkNjcTLS92E58pmlK7iI2GgqwnQ7NxsgDIsrDqoHBnN/o0u5CLddIntyXQYtEpuPxqA+ZaOgVn7UIouFWJKFUw84/2bqSd8Fq3sThKIjMoPJaHGMeNuGQzwz+hPf74jPgVuRccrQPMV19nXW/i3CiHVYHUpidCuvb+4pbHgvK11G9naoRQ/bAqNvF0lWoB7845eE6KTW/NhlfmYAOcXTaO2Pmtmj38s+TpsvOEYAXf7FeO3hNh44CC7Nl/H6m+lJZwx1ZKszofi9KyJaRAxK1M6yz+KQ4B/jszn5xcSLfWWxsaTY2jPAtTNYYcbQir/cNMJjB/HyDUhetI7LxlXSHAk2MQ9bVvYsu+hUwhT1eOthcoA3Xuq1U2UGQeG8YCFES0yjMYqwMujwTrDLOQ3jEbP82caHLptPEGC0fSj+DUFevV4F7lyUNvM6DcBcJBQ7M6/ED937MKoyk+ZIayNlSgVWAD798xUf3kye3EG28KQdc+HwemoN/ep6Gqb470E74y+VRuFUw7TGh7TrDnE+dyeqnzWeRzOJmmbc191fYNQ=
  - secure: NzLf5gy3lnxNx7Xyej95czUgVKqYfaQ3lDnSenWpP7+iKK9afbQlk19S84HX/Abbtz9bbppWtKfDtdZSKb5zHcTX8ciUW7Atiszp0ovfdjmP4f7bOZm3rtd66N8MYHrCTW/lIhKUCk8kHd6LxEzQBacId1XB4/JHjKX9OYCFbSwNNWz1zrenGlJS2capPvQ6IMsUGqNHAgs0EOOucGdC+A3pSRvZFNsf5kLrwY24oKcb9Kq05wTggff/qjG3mHOOeyoc8HGCbqpVHNZdHfRbMP3gN1sGPiu4+XwSpM/Tz36E1DOosySZtggURDMjI8eU//WNtPczgKCiAEkg6usNbVwCepf4aEYNVqH809ymYOIGBSK7XeYt++USg40iU5BfanPioWKt98sH3CjVJIFZMWIdtIEMg1LFRnFx3IfFmO2BK11klJs8TFokYKdAA7t+Umi0a8QydqTxJy2qASFgYsUHbphgzbzXXrLTLMEZj1UHpm+3uhz5cTHptR6bRxYA2WfuBynqHAcicUZuQceGSuDrd+xOLLz1NjvWgyqxZABwUvBlUJJZM1K7yOvHBonZ+ZuAjzShNlxbN5BEl2bbA7xpYSC2cTZ4CIJv53gB7uzQOZ5KItgcvoDw47PXTVwQ9fwc7C0Rdj4qfz3IbgGz8NSyNfc88P8AX5YaPpjt+Ck=
  - secure: qKviTHvkMW7b+jJtCkARFvTXtg2BjlzhbWV8pvw7Pcwrr6iab2xvK+ZR47ODTcnpAKmf1tB8zF+0prSo9pfyeuoQuFj6Ye+ObfRgjbVeq4hmm3J2/AERLHQ4jVlPpoJQSkVqi59Im1IrNnTFxLWst2GyIiRCKQnnOGHBFABpwOzYGv9hgceYlpZz2Vi5L0k05R/cBYJcOwXp7x04+4cPYoNonEkkhi4OoGH21PBTucQt8xg9xKWL8ThS9A464nKooKIrUmmhTw536UcOtbs2qk70W3Y9nywANDYi3EG2i8DISEcAWAA736uQx8UwnWy3OozKBY1tvFR/M8+YnzWsE6T4m/93O5ooHoq95VLEnSA4r3Pq2Kf0k0ZK07xI1P3TwsZZVqoGhwToMC8Y+cCIIQdi5noszYEVrFVh0HnZD/VztgTozopNhBiFG4UI27s08jbwS447DUkMoF++VgMu7+WXafHUjbHW3k/+NlVhK1Ssb0t+Q28ALxGbzk8cN3ufkvyIe/o0gBkO3p90VjcjZMielUDFGl72pGTNvcZNlpQkwbSraIRMIHVi8gyzgL+5k2v+siGyyAPJPrIRuxIPXTflcXSSPfbmoZZ5GqaZ46ABmjiwfNVLd7IupXGhS2eKq24VBiDVxtoLWDLzgpADLU4UUgkmOCbJUTbeHlGlsnY=
  - secure: ZXOSgXC6Ai5xqJ8j5mvH/HNbtYPAGWEij8oS1LnG4bJVJLAMFKqQ/ud0K/NB8vCiuWfr12oUe42hs6ywDQb8Ds1U5J6vq9hdF3DXyGLyf+7XfKwIRccoNGIvv9Ad1i08F/W+oAs2Oq3q3fmZYw3Rvtd7/S2lwwZOXWFQ7a1Og2VjYQzk35/11rxXJEBJ0AoaFIweB6wBdZJ85t+QYZ8WXSBzAIZyP2DhDNfBBADEIUPt8fdr2iGdYd7zCo87CreIr07haCcBK6WbJ29bS09U49lt3Ru/TNPHH7tF8dWM7PI8ovEl61H/u3N4yuslXpM6FIOgc+gVOtB1kzwqVpqiYH3Uh+JUtw9NCWZaqfpl0Hc9E8HfhGBx2eq4V+XKEer48ag8bGT0mzQDcUb7FLF0kUblr4CSD8r8r+XCMc7gXGSxwBi9QZ+ivtwfYdZ3IoKbPfd6E3KgPzNi+hgGu5AtKjWK78XAGhN1iYtQAxSGfAWK/g8SCKXVwfbJdxD5TRFRERDmRSqidUJi6gIG3DadestXsZzJXdut+E46UNAMyM4RTNDjc/v/MzzqScFelPSSSHip1I+mY6JixXyyPsV6lc8AWDXTiS0s2g4mGhYdTaIceLEgomM7YwMTpswYZh7hLfYBRlSrQumVdHNuideBs6WVivQ0rk95FYtsknFrozs=
  - secure: VLfNESsln96vmbfmkOQc441VOASg9+n3jo+9rLm+CPXpVKJWj3HYAd/Dk3LV6SyKmWGD2wpr+l3qr7AAa1UWmINX+3IV+nDKk4e4Sbu03z78IKbskwvss9f9aVc1/ryG+/e7851Cc31soM/+Don6mlDHz1gLcG6QkS/jXTNqybXccOFVkqjev24IBSa94Mzc9hX315TDpLDUTE64T3hPQPtIOpzvzWCl11jKcH8NLymNHm/JHiF9HKQR8V8ucBsVCU8MbQpnuMvfnrUwe+/dY/pJEWDwGBOFLZ9/qbj6XJSN6XuqRvsaVoLklf3WEOys+FcNAI0z7gjCQXxPDyB/r3Hppjvui05bjMa6xUWyCRFLVng/khCn4Vq9aGWOUL3QCCltd7GWfsmTiLhymIEgK+eMZTwBCd/9u/be/9n7u3v5ZU5lLZ+251/0wr2UaMCquUzduV7uXkpWl7DJdJqtMVR4JPclUmlLPr149TV/D9dAnSi9TOm1BFkLNAiCMQ6xGQEJnJBcSrgXDgrAMTDo307XFQpCTVznBZ3/jrUumFpFtOxKISyBzQQGu7x0Xw6ts9qKMlK+nprtfn4OIUQZq5vjlQxSxOrRyBzPLPgFMhOuqlbkmfr/o3u4DcqCkcFiiu19mtAz4i5aBUfIMdGe+JGw4cM2mDswdK5QWyrJV9Y=
